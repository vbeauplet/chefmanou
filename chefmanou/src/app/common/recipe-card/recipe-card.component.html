<!-- Display loader if card is loading -->
<loader
  style="margin-bottom:50px;margin-top:50px;"
  *ngIf="this.isLoading">
</loader>

  <!-- Card body: an image and the content after -->
<div
  *ngIf="!this.isLoading"
  class="full col-dir hor-center flex-block">
    
  <active-image
    *ngIf="this.recipe[this.imageAttribute] !== null && this.recipe[this.imageAttribute] !== ''"
    [hasOverlay]="this.hasOverlay"
    [hasUploadButton]="false"
    [imageSrc]="this.recipe[this.imageAttribute]"
    [size]="'full'"
    [shape]="this.imageShape">
  </active-image>
  
  <div
    class="margined small title recipe-card-title">
    <span>{{this.recipe.name}}</span>
  </div>
  
  <div
    class="show-more-tags-button-container near-full row-dir hor-space-between flex-block">
    <div></div>
    <div
      *ngIf="this.displayShowMoreTagsButton"
      class="show-more-tags-button"
      (click)="$event.stopPropagation();this.areTagsUnwrapped=true;this.displayShowMoreTagsButton=false;">
      ...
    </div>
  </div>
  
  <div
    id="{{ this.recipe.id }}_tags"
    class="recipe-card-tags margined near-full row-dir hor-center flex-block"
    [class.unwrapped]="this.areTagsUnwrapped">
    <div
      *ngFor="let tag of this.recipe.tags"
      class="recipe-card-tag"
      (click)="$event.stopPropagation();this.clickOnTag(tag)">
      {{ tag }}
    </div>
  </div>
  
  <div
    class="recipe-info">
    CrÃ©e le:
    {{ this.recipe.created | date:"dd/MM/yyyy" }}
  </div>
  
  <user-miniature
    *ngIf="this.recipe.isAuthorResolved"
    [user]="this.recipe.resolvedAuthor"
    [size]="'near-full'"
    [miniatureStyle]="'transparent'"
    (click)="$event.stopPropagation();clickOnUser(this.recipe.resolvedAuthor)">
  </user-miniature>
  <div
    *ngIf="!this.recipe.isAuthorResolved"
    class="user-miniature-placeholder">
  </div>
  
  <div
    style="margin-left:0px;margin-right:0px"
    class="recipe-info full row-dir vert-center hor-space-evenly flex-block">
    
    <indicator
      [size]="'quarter'"
      [icon]="'M'"
      [iconSize]="20"
      [text]="this.recipe.views"
      [textAlign]="'center'">
    </indicator>
    
    <indicator
      *ngIf="this.recipe.portionNumber !== ''"
      [size]="'quarter'"
      [icon]="','"
      [iconSize]="20"
      [text]="this.recipe.portionNumber"
      [textAlign]="'center'">
    </indicator>
    
    <indicator
      *ngIf="this.recipe.time !== ''"
      [size]="'quarter'"
      [icon]="'N'"
      [iconSize]="20"
      [text]="this.recipe.time"
      [textAlign]="'center'">
    </indicator>
    
  </div>
  
  <ng-content></ng-content>
    
</div>

